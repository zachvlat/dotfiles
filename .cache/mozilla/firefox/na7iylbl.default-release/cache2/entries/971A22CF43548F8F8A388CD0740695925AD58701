/**
 * Audio Player
 *
 * This file is licensed under the Affero General Public License version 3 or
 * later. See the LICENSE.md file.
 *
 * @author Marcel Scherello <audioplayer@scherello.de>
 * @copyright 2021 Marcel Scherello
 */
/** global: OC */

'use strict';

document.addEventListener('DOMContentLoaded', function () {
    OCA.Audioplayer.Dashboard.init();
})

if (!OCA.Audioplayer) {
    /**
     * @namespace
     */
    OCA.Audioplayer = {};
}
OCA.Audioplayer.Player = {
    html5Audio: null,
    currentTrackIndex: 0,   // the index of the <source> list to be played
    currentPlaylist: 0,     // ID of the current playlist. Needed to recognize UI list changes
    repeatMode: null,       // repeat mode null/single/list
    shuffleHistory: [],     // array to store the track ids which were already played. Avoid multi playback in shuffle
    shuffle: false,         // shuffle mode false/true
    trackStartPosition: 0,  // start position of a track when the player is reopened and the playback should continue
    lastSavedSecond: 0,     // last autosaved second

    /**
     * set track and play it
     */
    play: function () {
        OCA.Audioplayer.Player.setTrack();
    },

    /**
     * stop the playback and update the UI with the paused track
     */
    stop: function () {
        this.html5Audio.pause();
        document.getElementById('playerPlay').classList.remove('playing');
        document.getElementById('audioplayerTitle').innerHTML = '';
    },

    /**
     * select the next track and play it
     * it is dependent on shuffle mode, repeat mode and possible end of playlist
     */
    next: function () {
        OCA.Audioplayer.Player.trackStartPosition = 0;
        OCA.Audioplayer.Player.lastSavedSecond = 0;
        var numberOfTracks = OCA.Audioplayer.Player.html5Audio.childElementCount - 1; // index stats counting at 0
        if (OCA.Audioplayer.Player.shuffle === true) {
            // shuffle => get random track index
            var minimum = 0;
            var maximum = numberOfTracks;
            var randomIndex = 0;
            var foundPlayedTrack = false;

            if (OCA.Audioplayer.Player.shuffleHistory.length === OCA.Audioplayer.Player.html5Audio.childElementCount) {
                OCA.Audioplayer.Player.stop();
                OCA.Audioplayer.Player.shuffleHistory = [];
                return;
            }

            do {
                randomIndex = Math.floor(Math.random() * (maximum - minimum + 1)) + minimum;
                foundPlayedTrack = OCA.Audioplayer.Player.shuffleHistory.includes(randomIndex);
            } while (foundPlayedTrack === true);

            OCA.Audioplayer.Player.currentTrackIndex = randomIndex;
            OCA.Audioplayer.Player.shuffleHistory.push(randomIndex);
            OCA.Audioplayer.Player.setTrack();
        } else if (OCA.Audioplayer.Player.currentTrackIndex === numberOfTracks) {
            // if end is reached, either stop or restart the list
            if (OCA.Audioplayer.Player.repeatMode === 'list') {
                OCA.Audioplayer.Player.currentTrackIndex = 0;
                OCA.Audioplayer.Player.setTrack();
            } else {
                OCA.Audioplayer.Player.stop();
            }
        } else {
            OCA.Audioplayer.Player.currentTrackIndex++;
            OCA.Audioplayer.Player.setTrack();
        }
    },

    /**
     * select the previous track and play it
     */
    prev: function () {
        OCA.Audioplayer.Player.trackStartPosition = 0;
        OCA.Audioplayer.Player.lastSavedSecond = 0;
        OCA.Audioplayer.Player.currentTrackIndex--;
        OCA.Audioplayer.Player.setTrack();
    },

    /**
     * set the track to the selected track index and check if it can be played at all
     * play/pause when the same track is selected or get a new one
     */
    setTrack: function () {
        var trackToPlay = this.html5Audio.children[this.currentTrackIndex];
        if (trackToPlay.dataset.canPlayMime === 'false') {
            this.next();
            return;
        }
        // new track to be played
        if (trackToPlay.src !== this.html5Audio.getAttribute('src')) {
            document.getElementById('playerPlay').classList.replace('APplay-pause', 'icon-loading')
            this.lastSavedSecond = 0;
            this.html5Audio.setAttribute('src', trackToPlay.src);
            this.html5Audio.load();
        } else if (!this.html5Audio.paused) {
            OCA.Audioplayer.Player.stop();
            return;
        }

        let playPromise = this.html5Audio.play();
        if (playPromise !== undefined) {
            playPromise.then(_ => {
                document.getElementById('playerPlay').classList.replace('icon-loading', 'APplay-pause');
                document.getElementById('playerPlay').classList.add('playing');
                OCA.Audioplayer.Player.indicateCurrentPlayingTrack();
            })
                .catch(error => {
                    OCA.Audioplayer.Player.stop();
                    document.getElementById('playerPlay').classList.replace('icon-loading','icon-loading');
                    //document.getElementById('playerPlay').classList.replace('APplay-pause','play');
                });
        }

    },

    indicateCurrentPlayingTrack: function () {
        //in every case, update the playbar and medaservices
        var coverUrl = OC.generateUrl('apps/audioplayer/getcover/');
        var currentTrack = this.html5Audio.children[this.currentTrackIndex];

        if (currentTrack) {
            var addCss;
            var addDescr;
            var coverID = currentTrack.dataset.cover;
            if (coverID === 'null') {
                addCss = 'background-color: #D3D3D3;color: #333333;';
                addDescr = currentTrack.dataset.title[0];
                if ('mediaSession' in navigator) {
                    navigator.mediaSession.metadata = new MediaMetadata({
                        title: currentTrack.dataset.title,
                        artist: currentTrack.dataset.artist,
                        album: currentTrack.dataset.album,
                    });
                }
            } else {
                addCss = 'background-image:url(' + coverUrl + coverID + ');height: 180px;';
                addDescr = '';
                if ('mediaSession' in navigator) {
                    navigator.mediaSession.metadata = new MediaMetadata({
                        title: currentTrack.dataset.title,
                        artist: currentTrack.dataset.artist,
                        album: currentTrack.dataset.album,
                        artwork: [
                            {src: coverUrl + coverID, sizes: '192x192', type: 'image/png'},
                        ]
                    });
                }
            }
            document.getElementById('audioplayerCover').setAttribute('style', addCss);
            document.getElementById('audioplayerCover').innerText = addDescr;

            let currentCount = this.currentTrackIndex+1 + '/' + this.html5Audio.childElementCount + ': ';
            document.getElementById('audioplayerTitle').innerHTML = currentCount + currentTrack.dataset.title;
        }
    },


}

/**
 * @namespace OCA.Audioplayer.Dashboard
 */
OCA.Audioplayer.Dashboard = {
    AjaxCallStatus: null,
    canPlayMimeType: [],

    init: function () {
        if (typeof OCA.Dashboard === 'object') {
            OCA.Dashboard.register('audioplayer', (el) => {
                //el.innerHTML = '<ul id="ulAudioplayer"></ul>';
                el.innerHTML = OCA.Audioplayer.Dashboard.buildPlayer() +
                    OCA.Audioplayer.Dashboard.buildCategoryDropdown() +
                    OCA.Audioplayer.Dashboard.buildItemDropdown() +
                    OCA.Audioplayer.Dashboard.buildCurrentTitle() +
                    OCA.Audioplayer.Dashboard.buildItemCover();
                OCA.Audioplayer.Dashboard.initActions();
            });
        }
    },

    initActions: function () {
        document.getElementById('audiplayerCategory').addEventListener('change', OCA.Audioplayer.Dashboard.loadCategory);
        document.getElementById('audioplayerItem').addEventListener('change', OCA.Audioplayer.Dashboard.getTracks);
        document.getElementById('playerPrev').addEventListener('click', OCA.Audioplayer.Player.prev);
        document.getElementById('playerNext').addEventListener('click', OCA.Audioplayer.Player.next);
        document.getElementById('playerPlay').addEventListener('click', OCA.Audioplayer.Player.play);
        OCA.Audioplayer.Player.html5Audio = document.getElementById('html5Audio');
        OCA.Audioplayer.Player.html5Audio.addEventListener('ended', OCA.Audioplayer.Player.next, true);

        // mediaSession currently use for Chrome already to support hardware keys
        if ('mediaSession' in navigator) {
            navigator.mediaSession.setActionHandler('play', function () {
                OCA.Audioplayer.Player.play();
            });
            navigator.mediaSession.setActionHandler('pause', function () {
                OCA.Audioplayer.Player.stop();
            });
            navigator.mediaSession.setActionHandler('stop', function () {
                OCA.Audioplayer.Player.stop();
            });
            navigator.mediaSession.setActionHandler('previoustrack', function () {
                OCA.Audioplayer.Player.prev();
            });
            navigator.mediaSession.setActionHandler('nexttrack', function () {
                OCA.Audioplayer.Player.next();
            });
        }

        // evaluate if browser can play the mimetypes
        let mimeTypes = ['audio/mpeg', 'audio/mp4', 'audio/ogg', 'audio/wav', 'audio/flac', 'audio/x-aiff', 'audio/aac'];
        let mimeTypeAudio = document.createElement('audio');
        mimeTypes.forEach((element) => {
            if (mimeTypeAudio.canPlayType(element)) {
                OCA.Audioplayer.Dashboard.canPlayMimeType.push(element);
            }
        });
        // add playlist mimetypes
        OCA.Audioplayer.Dashboard.canPlayMimeType.push('audio/mpegurl', 'audio/x-scpls', 'application/xspf+xml');
    },

    buildPlayer: function () {
        return '<div id="" class="APplayerBar">'
            + '<div class="APplayerButton" title="' + t('audioplayer', 'Previous track') + '">'
            + '<div id="playerPrev" class="APbutton button APprevious"></div></div>'
            + '<div class="APplayerButton" title="' + t('audioplayer', 'Play/Pause') + '">'
            + '<div id="playerPlay" class="APbutton button APplay-pause"></div></div>'
            + '<div class="APplayerButton" title="' + t('audioplayer', 'Next track') + '">'
            + '<div id="playerNext" class="APbutton button APnext"></div></div><audio id="html5Audio" hidden=""></audio></div>';
    },

    buildCategoryDropdown: function () {
        return '<div class="APcategoryBar">\n' +
            '<select id="audiplayerCategory" style="width: 180px;">\n' +
            '<option value="" selected>' + t('audioplayer', 'Selection') + '</option>\n' +
            '<option value="Playlist">' + t('audioplayer', 'Playlists') + '</option>\n' +
            '<option value="Album">' + t('audioplayer', 'Albums') + '</option>\n' +
            '<option value="Album Artist">' + t('audioplayer', 'Album Artists') + '</option>\n' +
            '<option value="Artist">' + t('audioplayer', 'Artists') + '</option>\n' +
            '<option value="Folder">' + t('audioplayer', 'Folders') + '</option>\n' +
            '<option value="Genre">' + t('audioplayer', 'Genres') + '</option>\n' +
            '<option value="Title">' + t('audioplayer', 'Titles') + '</option>\n' +
            '<option value="Tags">' + t('audioplayer', 'Tags') + '</option>' +
            '<option value="Year">' + t('audioplayer', 'Years') + '</option>\n' +
            '</select>\n' +
            '</div>\n'
    },

    buildItemDropdown: function () {
        return '<div  class="APitemBar">\n' +
            '<select id="audioplayerItem" style="width: 180px;">\n' +
            '</select>\n' +
            '</div>\n'
    },

    buildItemCover: function () {
        return '<div class="APcoverBar">\n' +
            '<div id="audioplayerLoading" style="text-align:center; padding-top:100px" class="icon-loading" hidden></div>' +
            '<div id="audioplayerCover" class="cover"></div>' +
            '</div>\n'
    },

    buildCurrentTitle: function () {
        return '<div class="APtitleBar">\n' +
            '<div id="audioplayerTitle" style="width: 180px;">\n' +
            '</div>\n' +
            '</div>\n'
    },

    showElement: function (element) {
        if (document.getElementById(element)) {
            document.getElementById(element).hidden = false;
        }
    },

    hideElement: function (element) {
        if (document.getElementById(element)) {
            document.getElementById(element).hidden = true;
        }
    },

    loadCategory: function () {
        var category = document.getElementById('audiplayerCategory').value;
        OCA.Audioplayer.Dashboard.showElement('audioplayerLoading');

        $.ajax({
            type: 'GET',
            url: OC.generateUrl('apps/audioplayer/getcategoryitems'),
            data: {category: category},
            success: function (jsondata) {
                if (jsondata.status === 'success') {
                    let select = document.getElementById('audioplayerItem')
                    select.innerHTML = '<option value="" selected>' + t('audioplayer', 'Selection') + '</option>';

                    for (var categoryData of jsondata.data) {
                        var optionElement = document.createElement('option');
                        optionElement.value = categoryData.id;
                        optionElement.innerHTML = categoryData.name;
                        select.appendChild(optionElement);
                    }
                    OCA.Audioplayer.Dashboard.hideElement('audioplayerLoading');
                }
            }
        });
        return true;
    },

    getTracks: function (callback, covers, albumDirectPlay) {

        OCA.Audioplayer.Dashboard.showElement('audioplayerLoading');
        if (OCA.Audioplayer.Dashboard.AjaxCallStatus !== null) {
            OCA.Audioplayer.Dashboard.AjaxCallStatus.abort();
        }

        let category = document.getElementById('audiplayerCategory').value;
        let categoryItem = document.getElementById('audioplayerItem').value;
        let player = document.getElementById('html5Audio');
        let canPlayMimeType = OCA.Audioplayer.Dashboard.canPlayMimeType;

        OCA.Audioplayer.Dashboard.AjaxCallStatus = $.ajax({
            type: 'GET',
            url: OC.generateUrl('apps/audioplayer/gettracks'),
            data: {category: category, categoryId: categoryItem},
            success: function (jsondata) {
                //document.getElementById('loading').style.display = 'none';
                if (jsondata.status === 'success') {

                    player.innerHTML = '';
                    for (let itemData of jsondata.data) {

                        let streamUrl;
                        if (itemData['mim'] === 'audio/mpegurl' || itemData['mim'] === 'audio/x-scpls' || itemData['mim'] === 'application/xspf+xml') {
                            streamUrl = itemData['lin'];
                            jsondata.data = [];
                            break;
                        } else {
                            streamUrl = OC.generateUrl('apps/audioplayer/getaudiostream') + '?t=' + itemData['id'];
                        }

                        let canPlayMime
                        if (canPlayMimeType.includes(itemData['mim'])) {
                            canPlayMime = true;
                        } else {
                            canPlayMime = 'false';
                        }

                        let audioSource = document.createElement('source');
                        audioSource.src = streamUrl;
                        audioSource.dataset.trackid = itemData['id'];
                        audioSource.dataset.title = itemData['cl1'];
                        audioSource.dataset.artist = itemData['cl2'];
                        audioSource.dataset.album = itemData['cl3'];
                        audioSource.dataset.cover = itemData['cid'];
                        audioSource.dataset.canPlayMime = canPlayMime;
                        player.appendChild(audioSource);
                    }
                    document.getElementById('audioplayerTitle').innerHTML = jsondata.data.length + ' ' + t('audioplayer', 'Titles');
                } else {
                    document.getElementById('audioplayerTitle').innerHTML = t('audioplayer', 'No data');
                }
                OCA.Audioplayer.Dashboard.hideElement('audioplayerLoading');
                document.getElementById('audioplayerCover').removeAttribute('style');
                document.getElementById('audioplayerCover').innerText = '';
                OCA.Audioplayer.Player.currentTrackIndex = 0;
            }
        });
    },
}]†,≈ï{      d[†d[†Eê‚dd⁄ñ   u    O^partitionKey=%28https%2C152.67.67.138%29,:https://152.67.67.138/extra-apps/audioplayer/js/dashboard.js?v=1148a68b-0 necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Date: Wed, 10 May 2023 13:45:59 GMT
Server: Apache
Last-Modified: Wed, 15 Feb 2023 10:12:10 GMT
ETag: "4309-5f4ba5031bc92"
Accept-Ranges: bytes
Content-Length: 17161
Content-Type: application/javascript
 original-response-headers Date: Wed, 10 May 2023 13:45:59 GMT
Server: Apache
Last-Modified: Wed, 15 Feb 2023 10:12:10 GMT
ETag: "4309-5f4ba5031bc92"
Accept-Ranges: bytes
Content-Length: 17161
Keep-Alive: timeout=5, max=94
Connection: Keep-Alive
Content-Type: application/javascript
 ctid 2 uncompressed-len 0 net-response-time-onstart 1077 net-response-time-onstop 1078   C	